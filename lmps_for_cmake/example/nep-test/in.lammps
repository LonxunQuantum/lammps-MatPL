variable        DUMP_FREQ       equal 5
variable        restart         equal 0
units           metal
boundary        p p p
atom_style      atomic

if "${restart} > 0" then "read_restart lmps.restart.*" else "read_data lmp.config"

mass   1    107.868

#pair_style   matpl  0_nep5.txt 1_nep5.txt 2_nep5.txt 3_nep5.txt  out_freq ${DUMP_FREQ} out_file model_devi.out 
#pair_coeff       * * 47

#pair_style nep
#pair_coeff * * 0_nep5.txt Ag

# with model_deviation
pair_style hybrid/overlay matpl 0_nep5.txt 1_nep5.txt 2_nep5.txt 3_nep5.txt  out_freq ${DUMP_FREQ} out_file model_devi.out d3 9000 1600 damp_bj pbe

# or 
# pair_style hybrid/overlay matpl 0_nep5.txt d3 9000 1600 damp_bj pbe
 
pair_coeff * * matpl Ag
pair_coeff * * d3 Ag

variable        NSTEPS          equal 4000
variable        THERMO_FREQ     equal 5
variable        TEMP            equal 500.000000
variable        PRESS           equal 100.000000
variable        TAU_T           equal 0.100000
variable        TAU_P           equal 0.500000

# in0


neighbor        1.0 bin
neigh_modify    delay 10

box              tilt large
change_box       all triclinic


thermo_style    custom step temp pe ke etotal press vol lx ly lz xy xz yz
thermo          ${THERMO_FREQ}
fix 1 all nvt temp ${TEMP} ${TEMP} ${TAU_T}
# fix             1 all npt temp ${TEMP} ${TEMP} ${TAU_T} iso ${PRESS} ${PRESS} ${TAU_P}

timestep        0.001000
dump            1 all custom ${DUMP_FREQ} dump.trj id type x y z fx fy fz
restart         10000 lmps.restart

if "${restart} == 0" then "velocity        all create ${TEMP} 87062"
run             ${NSTEPS} upto
